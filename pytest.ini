[tool:pytest]
minversion = 8.0
addopts = -ra -q --strict-markers --strict-config --tb=short
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*
asyncio_mode = auto
asyncio_default_fixture_loop_scope = function
timeout = 300
markers =
    slow: marks tests as slow (deselect with '-m "not slow"')
    integration: marks tests as integration tests
    contract: marks tests as contract tests
    unit: marks tests as unit tests
    installation: marks tests that test UV installation functionality
    async_test: marks tests that require async functionality
    service_dependent: marks tests that depend on external services
    docker_required: marks tests that require Docker to be running
    uv_required: marks tests that require UV to be installed
    performance: marks tests that validate performance requirements
    docker: marks tests that require Docker services
    ollama: marks tests that require Ollama
    redis: marks tests that require Redis
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore::pytest.PytestUnraisableExceptionWarning
    ignore:.*unclosed.*:ResourceWarning
    ignore::pydantic.warnings.PydanticDeprecatedSince20
env =
    DOCBRO_TEST_MODE = true
    DOCBRO_LOG_LEVEL = DEBUG
    DOCBRO_DATABASE_PATH = :memory:
    DOCBRO_QDRANT_URL = http://localhost:6333
    DOCBRO_OLLAMA_URL = http://localhost:11434
    DOCBRO_EMBEDDING_MODEL = mxbai-embed-large
    UV_CACHE_DIR = /tmp/uv-test-cache